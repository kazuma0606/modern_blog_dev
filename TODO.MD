# TODO: è¿½åŠ ã®DBè¦ä»¶

## **âœ… å¿…é ˆãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«**
### **1ï¸âƒ£ `User`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼‰**
- [ ] ç®¡ç†è€…ãƒ»ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŒºåˆ¥ï¼ˆ`role: ADMIN | USER`ï¼‰
- [ ] `ã„ã„ã­ / Bookmark` ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®š

```prisma
model User {
  id          Int      @id @default(autoincrement())
  name        String   @db.VarChar(255)
  mail_address String  @unique @db.VarChar(255)
  password    String   @db.VarChar(255)
  role        Role     @default(USER)
  createdAt   DateTime @default(now()) @db.Timestamp(0)
  updatedAt   DateTime @updatedAt @db.Timestamp(0)
  
  Favorite    Favorite[]
  Bookmark    Bookmark[]
}

enum Role {
  ADMIN
  USER
}
```

### **2ï¸âƒ£ `Page`ï¼ˆè¨˜äº‹ç®¡ç†ï¼‰**
- [ ] è¨˜äº‹ã® `title` / `description` / `tags` ã‚’ä¿å­˜
- [ ] è¨˜äº‹å†…å®¹ã‚’ `Markdown / MDX` ã§ä¿å­˜
- [ ] `createdAt` / `updatedAt` ã‚’è¨˜éŒ²
- [ ] `ã„ã„ã­ / Bookmark` ã®æ•°ã‚’å–å¾—

```prisma
model Page { 
  contents_id Int        @id @default(autoincrement())
  title       String     @db.VarChar(255)
  pages       String     @db.Text
  status      Status     @default(NOT_STORED)
  tags        String[]
  description String?
  createdAt   DateTime   @default(now()) @db.Timestamp(0)
  updatedAt   DateTime   @updatedAt @db.Timestamp(0)
  
  Favorite    Favorite[]
  Bookmark    Bookmark[]
}

enum Status {
  NOT_STORED
  IN_PROGRESS
  COMPLETED
}
```

### **3ï¸âƒ£ `Favorite`ï¼ˆã„ã„ã­ç®¡ç†ï¼‰**
```prisma
model Favorite {
  id        Int      @id @default(autoincrement())
  userId    Int?     // NULL è¨±å¯ï¼ˆåŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œï¼‰
  pageId    Int
  page      Page     @relation(fields: [pageId], references: [contents_id])
  user      User?    @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
}
```

### **4ï¸âƒ£ `Bookmark`ï¼ˆãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ç®¡ç†ï¼‰**
```prisma
model Bookmark {
  id        Int      @id @default(autoincrement())
  userId    Int?     // NULL è¨±å¯ï¼ˆåŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œï¼‰
  pageId    Int
  page      Page     @relation(fields: [pageId], references: [contents_id])
  user      User?    @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
}
```

---

## **â­• æ‹¡å¼µæ©Ÿèƒ½ï¼ˆè¿½åŠ äºˆå®šï¼‰**
### **5ï¸âƒ£ `Comment`ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ï¼‰**
```prisma
model Comment {
  id        Int      @id @default(autoincrement())
  userId    Int
  pageId    Int
  parentId  Int?     // NULL ãªã‚‰ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¡ãƒ³ãƒˆ
  content   String   @db.Text
  createdAt DateTime @default(now())
  
  user      User     @relation(fields: [userId], references: [id])
  page      Page     @relation(fields: [pageId], references: [contents_id])
  parent    Comment? @relation(fields: [parentId], references: [id])
}
```

### **6ï¸âƒ£ `Notification`ï¼ˆé€šçŸ¥æ©Ÿèƒ½ï¼‰**
```prisma
model Notification {
  id        Int      @id @default(autoincrement())
  userId    Int
  message   String   @db.Text
  isRead    Boolean  @default(false)
  createdAt DateTime @default(now())
  
  user      User     @relation(fields: [userId], references: [id])
}
```

### **7ï¸âƒ£ `Tag`ï¼ˆã‚¿ã‚°ç®¡ç†ï¼‰**
```prisma
model Tag {
  id   Int    @id @default(autoincrement())
  name String @unique
  
  PageTag PageTag[]
}

model PageTag {
  pageId Int
  tagId  Int
  
  page Page @relation(fields: [pageId], references: [contents_id])
  tag  Tag  @relation(fields: [tagId], references: [id])
  
  @@id([pageId, tagId]) // è¤‡åˆä¸»ã‚­ãƒ¼
}
```

### **8ï¸âƒ£ `Analytics`ï¼ˆã‚¢ã‚¯ã‚»ã‚¹è§£æï¼‰**
```prisma
model Analytics {
  id        Int      @id @default(autoincrement())
  pageId    Int
  viewCount Int      @default(0)
  uniqueVisitors Int @default(0)
  createdAt DateTime @default(now())
  
  page      Page     @relation(fields: [pageId], references: [contents_id])
}
```

---

## **ğŸ”¥ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**
- [ ] **`User` / `Page` / `Favorite` / `Bookmark` ã‚’ãƒ™ãƒ¼ã‚¹ã« `prisma migrate dev` ã‚’å®Ÿè¡Œï¼**
- [ ] **API ã‚’ä½œæˆã—ã€`ã„ã„ã­ / Bookmark / ã‚³ãƒ¡ãƒ³ãƒˆ` ã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼**
- [ ] **æ‹¡å¼µã™ã‚‹ãªã‚‰ `Comment` / `Tag` / `Notification` ã‚‚è¿½åŠ ï¼**

